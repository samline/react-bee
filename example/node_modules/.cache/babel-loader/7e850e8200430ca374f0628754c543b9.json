{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/samuel.olvera/Documents/sites/htdocs/react-bee/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useIntersection = useIntersection;\n\nvar _react = require(\"react\");\n\nvar _requestIdleCallback = require(\"./request-idle-callback\");\n\nvar hasIntersectionObserver = typeof IntersectionObserver === 'function';\n\nfunction useIntersection(_ref) {\n  var rootRef = _ref.rootRef,\n      rootMargin = _ref.rootMargin,\n      disabled = _ref.disabled;\n  var isDisabled = disabled || !hasIntersectionObserver;\n  var unobserve = (0, _react).useRef();\n\n  var _useState = (0, _react).useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      visible = _useState2[0],\n      setVisible = _useState2[1];\n\n  var _useState3 = (0, _react).useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      element = _useState4[0],\n      setElement = _useState4[1];\n\n  (0, _react).useEffect(function () {\n    if (hasIntersectionObserver) {\n      if (unobserve.current) {\n        unobserve.current();\n        unobserve.current = undefined;\n      }\n\n      if (isDisabled || visible) return;\n\n      if (element && element.tagName) {\n        unobserve.current = observe(element, function (isVisible) {\n          return isVisible && setVisible(isVisible);\n        }, {\n          root: rootRef == null ? void 0 : rootRef.current,\n          rootMargin: rootMargin\n        });\n      }\n\n      return function () {\n        unobserve.current == null ? void 0 : unobserve.current();\n        unobserve.current = undefined;\n      };\n    } else {\n      if (!visible) {\n        var idleCallback = (0, _requestIdleCallback).requestIdleCallback(function () {\n          return setVisible(true);\n        });\n        return function () {\n          return (0, _requestIdleCallback).cancelIdleCallback(idleCallback);\n        };\n      }\n    }\n  }, [element, isDisabled, rootMargin, rootRef, visible]);\n  var resetVisible = (0, _react).useCallback(function () {\n    setVisible(false);\n  }, []);\n  return [setElement, visible, resetVisible];\n}\n\nvar observers = new Map();\nvar idList = [];\n\nfunction observe(element, callback, options) {\n  var _createObserver = createObserver(options),\n      id = _createObserver.id,\n      observer = _createObserver.observer,\n      elements = _createObserver.elements;\n\n  elements.set(element, callback);\n  observer.observe(element);\n  return function unobserve() {\n    elements.delete(element);\n    observer.unobserve(element); // Destroy observer when there's nothing left to watch:\n\n    if (elements.size === 0) {\n      observer.disconnect();\n      observers.delete(id);\n      var index = idList.findIndex(function (obj) {\n        return obj.root === id.root && obj.margin === id.margin;\n      });\n\n      if (index > -1) {\n        idList.splice(index, 1);\n      }\n    }\n  };\n}\n\nfunction createObserver(options) {\n  var id = {\n    root: options.root || null,\n    margin: options.rootMargin || ''\n  };\n  var existing = idList.find(function (obj) {\n    return obj.root === id.root && obj.margin === id.margin;\n  });\n  var instance;\n\n  if (existing) {\n    instance = observers.get(existing);\n\n    if (instance) {\n      return instance;\n    }\n  }\n\n  var elements = new Map();\n  var observer = new IntersectionObserver(function (entries) {\n    entries.forEach(function (entry) {\n      var callback = elements.get(entry.target);\n      var isVisible = entry.isIntersecting || entry.intersectionRatio > 0;\n\n      if (callback && isVisible) {\n        callback(isVisible);\n      }\n    });\n  }, options);\n  instance = {\n    id: id,\n    observer: observer,\n    elements: elements\n  };\n  idList.push(id);\n  observers.set(id, instance);\n  return instance;\n}\n\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n  Object.defineProperty(exports.default, '__esModule', {\n    value: true\n  });\n  Object.assign(exports.default, exports);\n  module.exports = exports.default;\n}","map":{"version":3,"sources":["../../client/use-intersection.tsx"],"names":["hasIntersectionObserver","IntersectionObserver","useIntersection","rootRef","rootMargin","disabled","isDisabled","unobserve","useRef","visible","setVisible","useState","element","setElement","useEffect","current","undefined","tagName","observe","isVisible","root","idleCallback","requestIdleCallback","cancelIdleCallback","resetVisible","useCallback","observers","Map","idList","callback","options","id","observer","elements","createObserver","set","delete","size","disconnect","index","findIndex","obj","margin","splice","existing","find","instance","get","entries","forEach","entry","target","isIntersecting","intersectionRatio","push"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.useIntersection = useIntersection;\nvar _react = require(\"react\");\nvar _requestIdleCallback = require(\"./request-idle-callback\");\nconst hasIntersectionObserver = typeof IntersectionObserver === 'function';\nfunction useIntersection({ rootRef , rootMargin , disabled  }) {\n    const isDisabled = disabled || !hasIntersectionObserver;\n    const unobserve = (0, _react).useRef();\n    const [visible, setVisible] = (0, _react).useState(false);\n    const [element, setElement] = (0, _react).useState(null);\n    (0, _react).useEffect(()=>{\n        if (hasIntersectionObserver) {\n            if (unobserve.current) {\n                unobserve.current();\n                unobserve.current = undefined;\n            }\n            if (isDisabled || visible) return;\n            if (element && element.tagName) {\n                unobserve.current = observe(element, (isVisible)=>isVisible && setVisible(isVisible), {\n                    root: rootRef == null ? void 0 : rootRef.current,\n                    rootMargin\n                });\n            }\n            return ()=>{\n                unobserve.current == null ? void 0 : unobserve.current();\n                unobserve.current = undefined;\n            };\n        } else {\n            if (!visible) {\n                const idleCallback = (0, _requestIdleCallback).requestIdleCallback(()=>setVisible(true));\n                return ()=>(0, _requestIdleCallback).cancelIdleCallback(idleCallback);\n            }\n        }\n    }, [\n        element,\n        isDisabled,\n        rootMargin,\n        rootRef,\n        visible\n    ]);\n    const resetVisible = (0, _react).useCallback(()=>{\n        setVisible(false);\n    }, []);\n    return [\n        setElement,\n        visible,\n        resetVisible\n    ];\n}\nconst observers = new Map();\nconst idList = [];\nfunction observe(element, callback, options) {\n    const { id , observer , elements  } = createObserver(options);\n    elements.set(element, callback);\n    observer.observe(element);\n    return function unobserve() {\n        elements.delete(element);\n        observer.unobserve(element);\n        // Destroy observer when there's nothing left to watch:\n        if (elements.size === 0) {\n            observer.disconnect();\n            observers.delete(id);\n            const index = idList.findIndex((obj)=>obj.root === id.root && obj.margin === id.margin);\n            if (index > -1) {\n                idList.splice(index, 1);\n            }\n        }\n    };\n}\nfunction createObserver(options) {\n    const id = {\n        root: options.root || null,\n        margin: options.rootMargin || ''\n    };\n    const existing = idList.find((obj)=>obj.root === id.root && obj.margin === id.margin);\n    let instance;\n    if (existing) {\n        instance = observers.get(existing);\n        if (instance) {\n            return instance;\n        }\n    }\n    const elements = new Map();\n    const observer = new IntersectionObserver((entries)=>{\n        entries.forEach((entry)=>{\n            const callback = elements.get(entry.target);\n            const isVisible = entry.isIntersecting || entry.intersectionRatio > 0;\n            if (callback && isVisible) {\n                callback(isVisible);\n            }\n        });\n    }, options);\n    instance = {\n        id,\n        observer,\n        elements\n    };\n    idList.push(id);\n    observers.set(id, instance);\n    return instance;\n}\n\nif ((typeof exports.default === 'function' || (typeof exports.default === 'object' && exports.default !== null)) && typeof exports.default.__esModule === 'undefined') {\n  Object.defineProperty(exports.default, '__esModule', { value: true });\n  Object.assign(exports.default, exports);\n  module.exports = exports.default;\n}\n\n//# sourceMappingURL=use-intersection.js.map"]},"metadata":{},"sourceType":"script"}