{"ast":null,"code":"\"use strict\";\n\nvar _toConsumableArray = require(\"/Users/sam/Documents/sites/react-bee/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _slicedToArray = require(\"/Users/sam/Documents/sites/react-bee/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.handleClientScriptLoad = handleClientScriptLoad;\nexports.initScriptLoader = initScriptLoader;\nexports.default = void 0;\n\nvar _extends = require(\"@swc/helpers/lib/_extends.js\").default;\n\nvar _interop_require_wildcard = require(\"@swc/helpers/lib/_interop_require_wildcard.js\").default;\n\nvar _object_without_properties_loose = require(\"@swc/helpers/lib/_object_without_properties_loose.js\").default;\n\nvar _react = _interop_require_wildcard(require(\"react\"));\n\nvar _headManagerContext = require(\"../shared/lib/head-manager-context\");\n\nvar _headManager = require(\"./head-manager\");\n\nvar _requestIdleCallback = require(\"./request-idle-callback\");\n\nvar ScriptCache = new Map();\nvar LoadCache = new Set();\nvar ignoreProps = ['onLoad', 'onReady', 'dangerouslySetInnerHTML', 'children', 'onError', 'strategy'];\n\nvar loadScript = function loadScript(props) {\n  var src = props.src,\n      id = props.id,\n      _props$onLoad = props.onLoad,\n      onLoad = _props$onLoad === void 0 ? function () {} : _props$onLoad,\n      _props$onReady = props.onReady,\n      onReady = _props$onReady === void 0 ? null : _props$onReady,\n      dangerouslySetInnerHTML = props.dangerouslySetInnerHTML,\n      _props$children = props.children,\n      children = _props$children === void 0 ? '' : _props$children,\n      _props$strategy = props.strategy,\n      strategy = _props$strategy === void 0 ? 'afterInteractive' : _props$strategy,\n      onError = props.onError;\n  var cacheKey = id || src; // Script has already loaded\n\n  if (cacheKey && LoadCache.has(cacheKey)) {\n    return;\n  } // Contents of this script are already loading/loaded\n\n\n  if (ScriptCache.has(src)) {\n    LoadCache.add(cacheKey); // Execute onLoad since the script loading has begun\n\n    ScriptCache.get(src).then(onLoad, onError);\n    return;\n  }\n\n  var el = document.createElement('script');\n  var loadPromise = new Promise(function (resolve, reject) {\n    el.addEventListener('load', function (e) {\n      resolve();\n\n      if (onLoad) {\n        onLoad.call(this, e);\n      } // Run onReady for the first time after load event\n\n\n      if (onReady) {\n        onReady();\n      }\n    });\n    el.addEventListener('error', function (e) {\n      reject(e);\n    });\n  }).catch(function (e) {\n    if (onError) {\n      onError(e);\n    }\n  });\n\n  if (src) {\n    ScriptCache.set(src, loadPromise);\n  }\n\n  LoadCache.add(cacheKey);\n\n  if (dangerouslySetInnerHTML) {\n    el.innerHTML = dangerouslySetInnerHTML.__html || '';\n  } else if (children) {\n    el.textContent = typeof children === 'string' ? children : Array.isArray(children) ? children.join('') : '';\n  } else if (src) {\n    el.src = src;\n  }\n\n  for (var _i = 0, _Object$entries = Object.entries(props); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        k = _Object$entries$_i[0],\n        value = _Object$entries$_i[1];\n\n    if (value === undefined || ignoreProps.includes(k)) {\n      continue;\n    }\n\n    var attr = _headManager.DOMAttributeNames[k] || k.toLowerCase();\n    el.setAttribute(attr, value);\n  }\n\n  if (strategy === 'worker') {\n    el.setAttribute('type', 'text/partytown');\n  }\n\n  el.setAttribute('data-nscript', strategy);\n  document.body.appendChild(el);\n};\n\nfunction handleClientScriptLoad(props) {\n  var _props$strategy2 = props.strategy,\n      strategy = _props$strategy2 === void 0 ? 'afterInteractive' : _props$strategy2;\n\n  if (strategy === 'lazyOnload') {\n    window.addEventListener('load', function () {\n      (0, _requestIdleCallback).requestIdleCallback(function () {\n        return loadScript(props);\n      });\n    });\n  } else {\n    loadScript(props);\n  }\n}\n\nfunction loadLazyScript(props) {\n  if (document.readyState === 'complete') {\n    (0, _requestIdleCallback).requestIdleCallback(function () {\n      return loadScript(props);\n    });\n  } else {\n    window.addEventListener('load', function () {\n      (0, _requestIdleCallback).requestIdleCallback(function () {\n        return loadScript(props);\n      });\n    });\n  }\n}\n\nfunction addBeforeInteractiveToCache() {\n  var scripts = [].concat(_toConsumableArray(document.querySelectorAll('[data-nscript=\"beforeInteractive\"]')), _toConsumableArray(document.querySelectorAll('[data-nscript=\"beforePageRender\"]')));\n  scripts.forEach(function (script) {\n    var cacheKey = script.id || script.getAttribute('src');\n    LoadCache.add(cacheKey);\n  });\n}\n\nfunction initScriptLoader(scriptLoaderItems) {\n  scriptLoaderItems.forEach(handleClientScriptLoad);\n  addBeforeInteractiveToCache();\n}\n\nfunction Script(props) {\n  var id = props.id,\n      _props$src = props.src,\n      src = _props$src === void 0 ? '' : _props$src,\n      _props$onLoad2 = props.onLoad,\n      onLoad = _props$onLoad2 === void 0 ? function () {} : _props$onLoad2,\n      _props$onReady2 = props.onReady,\n      onReady = _props$onReady2 === void 0 ? null : _props$onReady2,\n      _props$strategy3 = props.strategy,\n      strategy = _props$strategy3 === void 0 ? 'afterInteractive' : _props$strategy3,\n      onError = props.onError,\n      restProps = _object_without_properties_loose(props, [\"id\", \"src\", \"onLoad\", \"onReady\", \"strategy\", \"onError\"]); // Context is available only during SSR\n\n\n  var _useContext = (0, _react).useContext(_headManagerContext.HeadManagerContext),\n      updateScripts = _useContext.updateScripts,\n      scripts = _useContext.scripts,\n      getIsSsr = _useContext.getIsSsr;\n\n  (0, _react).useEffect(function () {\n    var cacheKey = id || src; // Run onReady if script has loaded before but component is re-mounted\n\n    if (onReady && cacheKey && LoadCache.has(cacheKey)) {\n      onReady();\n    }\n  }, [onReady, id, src]);\n  (0, _react).useEffect(function () {\n    if (strategy === 'afterInteractive') {\n      loadScript(props);\n    } else if (strategy === 'lazyOnload') {\n      loadLazyScript(props);\n    }\n  }, [props, strategy]);\n\n  if (strategy === 'beforeInteractive' || strategy === 'worker') {\n    if (updateScripts) {\n      scripts[strategy] = (scripts[strategy] || []).concat([_extends({\n        id: id,\n        src: src,\n        onLoad: onLoad,\n        onReady: onReady,\n        onError: onError\n      }, restProps)]);\n      updateScripts(scripts);\n    } else if (getIsSsr && getIsSsr()) {\n      // Script has already loaded during SSR\n      LoadCache.add(id || src);\n    } else if (getIsSsr && !getIsSsr()) {\n      loadScript(props);\n    }\n  }\n\n  return null;\n}\n\nvar _default = Script;\nexports.default = _default;\n\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n  Object.defineProperty(exports.default, '__esModule', {\n    value: true\n  });\n  Object.assign(exports.default, exports);\n  module.exports = exports.default;\n}","map":{"version":3,"sources":["../../client/script.tsx"],"names":["ScriptCache","Map","LoadCache","Set","ignoreProps","loadScript","props","src","id","onLoad","onReady","dangerouslySetInnerHTML","children","strategy","onError","cacheKey","has","add","get","then","el","document","createElement","loadPromise","Promise","resolve","reject","addEventListener","e","call","catch","set","innerHTML","__html","textContent","Array","isArray","join","k","value","Object","entries","undefined","includes","attr","DOMAttributeNames","toLowerCase","setAttribute","body","appendChild","handleClientScriptLoad","window","requestIdleCallback","loadLazyScript","readyState","addBeforeInteractiveToCache","scripts","querySelectorAll","forEach","script","getAttribute","initScriptLoader","scriptLoaderItems","Script","restProps","updateScripts","getIsSsr","useContext","HeadManagerContext","useEffect","concat"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.handleClientScriptLoad = handleClientScriptLoad;\nexports.initScriptLoader = initScriptLoader;\nexports.default = void 0;\nvar _extends = require(\"@swc/helpers/lib/_extends.js\").default;\nvar _interop_require_wildcard = require(\"@swc/helpers/lib/_interop_require_wildcard.js\").default;\nvar _object_without_properties_loose = require(\"@swc/helpers/lib/_object_without_properties_loose.js\").default;\nvar _react = _interop_require_wildcard(require(\"react\"));\nvar _headManagerContext = require(\"../shared/lib/head-manager-context\");\nvar _headManager = require(\"./head-manager\");\nvar _requestIdleCallback = require(\"./request-idle-callback\");\nconst ScriptCache = new Map();\nconst LoadCache = new Set();\nconst ignoreProps = [\n    'onLoad',\n    'onReady',\n    'dangerouslySetInnerHTML',\n    'children',\n    'onError',\n    'strategy', \n];\nconst loadScript = (props)=>{\n    const { src , id , onLoad =()=>{} , onReady =null , dangerouslySetInnerHTML , children ='' , strategy ='afterInteractive' , onError ,  } = props;\n    const cacheKey = id || src;\n    // Script has already loaded\n    if (cacheKey && LoadCache.has(cacheKey)) {\n        return;\n    }\n    // Contents of this script are already loading/loaded\n    if (ScriptCache.has(src)) {\n        LoadCache.add(cacheKey);\n        // Execute onLoad since the script loading has begun\n        ScriptCache.get(src).then(onLoad, onError);\n        return;\n    }\n    const el = document.createElement('script');\n    const loadPromise = new Promise((resolve, reject)=>{\n        el.addEventListener('load', function(e) {\n            resolve();\n            if (onLoad) {\n                onLoad.call(this, e);\n            }\n            // Run onReady for the first time after load event\n            if (onReady) {\n                onReady();\n            }\n        });\n        el.addEventListener('error', function(e) {\n            reject(e);\n        });\n    }).catch(function(e) {\n        if (onError) {\n            onError(e);\n        }\n    });\n    if (src) {\n        ScriptCache.set(src, loadPromise);\n    }\n    LoadCache.add(cacheKey);\n    if (dangerouslySetInnerHTML) {\n        el.innerHTML = dangerouslySetInnerHTML.__html || '';\n    } else if (children) {\n        el.textContent = typeof children === 'string' ? children : Array.isArray(children) ? children.join('') : '';\n    } else if (src) {\n        el.src = src;\n    }\n    for (const [k, value] of Object.entries(props)){\n        if (value === undefined || ignoreProps.includes(k)) {\n            continue;\n        }\n        const attr = _headManager.DOMAttributeNames[k] || k.toLowerCase();\n        el.setAttribute(attr, value);\n    }\n    if (strategy === 'worker') {\n        el.setAttribute('type', 'text/partytown');\n    }\n    el.setAttribute('data-nscript', strategy);\n    document.body.appendChild(el);\n};\nfunction handleClientScriptLoad(props) {\n    const { strategy ='afterInteractive'  } = props;\n    if (strategy === 'lazyOnload') {\n        window.addEventListener('load', ()=>{\n            (0, _requestIdleCallback).requestIdleCallback(()=>loadScript(props));\n        });\n    } else {\n        loadScript(props);\n    }\n}\nfunction loadLazyScript(props) {\n    if (document.readyState === 'complete') {\n        (0, _requestIdleCallback).requestIdleCallback(()=>loadScript(props));\n    } else {\n        window.addEventListener('load', ()=>{\n            (0, _requestIdleCallback).requestIdleCallback(()=>loadScript(props));\n        });\n    }\n}\nfunction addBeforeInteractiveToCache() {\n    const scripts = [\n        ...document.querySelectorAll('[data-nscript=\"beforeInteractive\"]'),\n        ...document.querySelectorAll('[data-nscript=\"beforePageRender\"]'), \n    ];\n    scripts.forEach((script)=>{\n        const cacheKey = script.id || script.getAttribute('src');\n        LoadCache.add(cacheKey);\n    });\n}\nfunction initScriptLoader(scriptLoaderItems) {\n    scriptLoaderItems.forEach(handleClientScriptLoad);\n    addBeforeInteractiveToCache();\n}\nfunction Script(props) {\n    const { id , src ='' , onLoad =()=>{} , onReady =null , strategy ='afterInteractive' , onError  } = props, restProps = _object_without_properties_loose(props, [\n        \"id\",\n        \"src\",\n        \"onLoad\",\n        \"onReady\",\n        \"strategy\",\n        \"onError\"\n    ]);\n    // Context is available only during SSR\n    const { updateScripts , scripts , getIsSsr  } = (0, _react).useContext(_headManagerContext.HeadManagerContext);\n    (0, _react).useEffect(()=>{\n        const cacheKey = id || src;\n        // Run onReady if script has loaded before but component is re-mounted\n        if (onReady && cacheKey && LoadCache.has(cacheKey)) {\n            onReady();\n        }\n    }, [\n        onReady,\n        id,\n        src\n    ]);\n    (0, _react).useEffect(()=>{\n        if (strategy === 'afterInteractive') {\n            loadScript(props);\n        } else if (strategy === 'lazyOnload') {\n            loadLazyScript(props);\n        }\n    }, [\n        props,\n        strategy\n    ]);\n    if (strategy === 'beforeInteractive' || strategy === 'worker') {\n        if (updateScripts) {\n            scripts[strategy] = (scripts[strategy] || []).concat([\n                _extends({\n                    id,\n                    src,\n                    onLoad,\n                    onReady,\n                    onError\n                }, restProps), \n            ]);\n            updateScripts(scripts);\n        } else if (getIsSsr && getIsSsr()) {\n            // Script has already loaded during SSR\n            LoadCache.add(id || src);\n        } else if (getIsSsr && !getIsSsr()) {\n            loadScript(props);\n        }\n    }\n    return null;\n}\nvar _default = Script;\nexports.default = _default;\n\nif ((typeof exports.default === 'function' || (typeof exports.default === 'object' && exports.default !== null)) && typeof exports.default.__esModule === 'undefined') {\n  Object.defineProperty(exports.default, '__esModule', { value: true });\n  Object.assign(exports.default, exports);\n  module.exports = exports.default;\n}\n\n//# sourceMappingURL=script.js.map"]},"metadata":{},"sourceType":"script"}