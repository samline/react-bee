{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getNextPathnameInfo = getNextPathnameInfo;\nvar _normalizeLocalePath = require(\"../../i18n/normalize-locale-path\");\nvar _removePathPrefix = require(\"./remove-path-prefix\");\nvar _pathHasPrefix = require(\"./path-has-prefix\");\nfunction getNextPathnameInfo(pathname, options) {\n  var _nextConfig;\n  var _ref = (_nextConfig = options.nextConfig) != null ? _nextConfig : {},\n    basePath = _ref.basePath,\n    i18n = _ref.i18n,\n    trailingSlash = _ref.trailingSlash;\n  var info = {\n    pathname: pathname,\n    trailingSlash: pathname !== '/' ? pathname.endsWith('/') : trailingSlash\n  };\n  if (basePath && (0, _pathHasPrefix).pathHasPrefix(info.pathname, basePath)) {\n    info.pathname = (0, _removePathPrefix).removePathPrefix(info.pathname, basePath);\n    info.basePath = basePath;\n  }\n  if (options.parseData === true && info.pathname.startsWith('/_next/data/') && info.pathname.endsWith('.json')) {\n    var paths = info.pathname.replace(/^\\/_next\\/data\\//, '').replace(/\\.json$/, '').split('/');\n    var buildId = paths[0];\n    info.pathname = paths[1] !== 'index' ? \"/\".concat(paths.slice(1).join('/')) : '/';\n    info.buildId = buildId;\n  }\n  if (i18n) {\n    var pathLocale = (0, _normalizeLocalePath).normalizeLocalePath(info.pathname, i18n.locales);\n    info.locale = pathLocale == null ? void 0 : pathLocale.detectedLocale;\n    info.pathname = (pathLocale == null ? void 0 : pathLocale.pathname) || info.pathname;\n  }\n  return info;\n}","map":{"version":3,"sources":["../../../../../shared/lib/router/utils/get-next-pathname-info.ts"],"names":["getNextPathnameInfo","pathname","options","basePath","i18n","trailingSlash","nextConfig","info","endsWith","pathHasPrefix","removePathPrefix","parseData","startsWith","paths","replace","split","buildId","slice","join","pathLocale","normalizeLocalePath","locales","locale","detectedLocale"],"mappings":"AAAA,YAAA;;;;;QA6CgBA,mBAAmB,GAAnBA,mBAAmB;AA7CC,IAAA,oBAAkC,GAAA,OAAA,CAAlC,kCAAkC,CAAA;AACrC,IAAA,iBAAsB,GAAA,OAAA,CAAtB,sBAAsB,CAAA;AACzB,IAAA,cAAmB,GAAA,OAAA,CAAnB,mBAAmB,CAAA;AA2C1C,SAASA,mBAAmB,CAACC,QAAgB,EAAEC,OAAgB,EAAE;MAC5BA,WAAkB;EAA5D,WAA0CA,CAAAA,WAAkB,GAAlBA,OAAO,CAACI,UAAU,KAAA,IAAA,GAAlBJ,WAAkB,GAAI,CAAA,CAAE;IAA1DC,QAAQ,QAARA,QAAQ;IAAEC,IAAI,QAAJA,IAAI;IAAEC,aAAa,QAAbA,aAAa;EACrC,IAAME,IAAI,GAAqB;IAC7BN,QAAQ,EAAEA,QAAQ;IAClBI,aAAa,EAAEJ,QAAQ,KAAK,GAAG,GAAGA,QAAQ,CAACO,QAAQ,CAAC,GAAG,CAAC,GAAGH;GAC5D;EAED,IAAIF,QAAQ,IAAIM,CAAAA,CAAAA,EAAAA,cAAsC,EAAA,aAAzB,CAACF,IAAI,CAACN,QAAQ,EAAEE,QAAQ,CAAC,EAAE;IACtDI,IAAI,CAACN,QAAQ,GAAGS,CAAAA,CAAAA,EAAAA,iBAAyC,EAAA,gBAAzB,CAACH,IAAI,CAACN,QAAQ,EAAEE,QAAQ,CAAC;IACzDI,IAAI,CAACJ,QAAQ,GAAGA,QAAQ;EACzB;EAED,IACED,OAAO,CAACS,SAAS,KAAK,IAAI,IAC1BJ,IAAI,CAACN,QAAQ,CAACW,UAAU,CAAC,cAAc,CAAC,IACxCL,IAAI,CAACN,QAAQ,CAACO,QAAQ,CAAC,OAAO,CAAC,EAC/B;IACA,IAAMK,KAAK,GAAGN,IAAI,CAACN,QAAQ,CACxBa,OAAO,CAAA,kBAAA,EAAqB,EAAE,CAAC,CAC/BA,OAAO,CAAA,SAAA,EAAY,EAAE,CAAC,CACtBC,KAAK,CAAC,GAAG,CAAC;IAEb,IAAMC,OAAO,GAAGH,KAAK,CAAC,CAAC,CAAC;IACxBN,IAAI,CAACN,QAAQ,GAAGY,KAAK,CAAC,CAAC,CAAC,KAAK,OAAO,cAAOA,KAAK,CAACI,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,IAAK,GAAG;IAC3EX,IAAI,CAACS,OAAO,GAAGA,OAAO;EACvB;EAED,IAAIZ,IAAI,EAAE;IACR,IAAMe,UAAU,GAAGC,CAAAA,CAAAA,EAAAA,oBAAgD,EAAA,mBAA7B,CAACb,IAAI,CAACN,QAAQ,EAAEG,IAAI,CAACiB,OAAO,CAAC;IACnEd,IAAI,CAACe,MAAM,GAAGH,UAAU,IAAA,IAAgB,GAA1BA,KAAAA,CAA0B,GAA1BA,UAAU,CAAEI,cAAc;IACxChB,IAAI,CAACN,QAAQ,GAAGkB,CAAAA,UAAU,IAAA,IAAU,GAApBA,KAAAA,CAAoB,GAApBA,UAAU,CAAElB,QAAQ,KAAIM,IAAI,CAACN,QAAQ;EACtD;EAED,OAAOM,IAAI;AACZ","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getNextPathnameInfo = getNextPathnameInfo;\nvar _normalizeLocalePath = require(\"../../i18n/normalize-locale-path\");\nvar _removePathPrefix = require(\"./remove-path-prefix\");\nvar _pathHasPrefix = require(\"./path-has-prefix\");\nfunction getNextPathnameInfo(pathname, options) {\n    var _nextConfig;\n    const { basePath , i18n , trailingSlash  } = (_nextConfig = options.nextConfig) != null ? _nextConfig : {};\n    const info = {\n        pathname: pathname,\n        trailingSlash: pathname !== '/' ? pathname.endsWith('/') : trailingSlash\n    };\n    if (basePath && (0, _pathHasPrefix).pathHasPrefix(info.pathname, basePath)) {\n        info.pathname = (0, _removePathPrefix).removePathPrefix(info.pathname, basePath);\n        info.basePath = basePath;\n    }\n    if (options.parseData === true && info.pathname.startsWith('/_next/data/') && info.pathname.endsWith('.json')) {\n        const paths = info.pathname.replace(/^\\/_next\\/data\\//, '').replace(/\\.json$/, '').split('/');\n        const buildId = paths[0];\n        info.pathname = paths[1] !== 'index' ? `/${paths.slice(1).join('/')}` : '/';\n        info.buildId = buildId;\n    }\n    if (i18n) {\n        const pathLocale = (0, _normalizeLocalePath).normalizeLocalePath(info.pathname, i18n.locales);\n        info.locale = pathLocale == null ? void 0 : pathLocale.detectedLocale;\n        info.pathname = (pathLocale == null ? void 0 : pathLocale.pathname) || info.pathname;\n    }\n    return info;\n}\n\n//# sourceMappingURL=get-next-pathname-info.js.map"]},"metadata":{},"sourceType":"script"}